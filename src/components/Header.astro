---
import { PhoneCall, Menu, X, WAIcon } from "@/components/icons";
---

<header
  class="sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60"
  x-data="{ expanded: false }"
>
  <div class="container flex h-16 items-center relative">
    <!-- Branding -->
    <div class="flex items-center gap-3 ml-4">
      <a href="/" class="flex items-center gap-2" aria-label="Ir a inicio">
        <img
          src="/isotipo.png"
          alt="Logo de Jason Castro, asesor inmobiliario en La Fortuna"
          class="size-12 shadow"
          fetchpriority="high"
          decoding="async"
        />
        <div class="flex flex-col leading-tight">
          <span class="text-base font-semibold text-secondary">
            Jason Castro
          </span>
          <span class="text-xs text-muted-foreground">
            Asesor Inmobiliario
          </span>
        </div>
      </a>
    </div>

    <!-- Menú Desktop -->
    <nav class="hidden lg:flex items-center gap-8 m-auto">
      <a
        href="/#categories"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Terrenos
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
      <a
        href="/#beneficios"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Beneficios
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
      <a
        href="/#servicios"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Mis Servicios
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
      <a
        href="/#testimonios"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Testimonios
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
      <a
        href="/#contacto"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Contacto
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
      <a
        href="/#blog"
        class="text-sm font-bold transition-colors hover:text-primary relative group"
      >
        Blog
        <span
          class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"
        ></span>
      </a>
    </nav>

    <!-- Acciones Desktop ocultas en pantallas menores a lg -->
    <div class="hidden xl:flex items-center gap-4 ml-4">
      <a
      href="https://wa.me/50660637256?text=Hola%20Jason%2C%20vengo%20de%20terrenoslafortunacr.com%20y%20quiero%20más%20información%20sobre%20los%20terrenos%20disponibles%20y%20el%20financiamiento."
      target="_blank"
      rel="noopener noreferrer"
      onclick="gtag('event', 'click', {
        event_category: 'Botón',
        event_label: 'WhatsApp',
        value: 1
      })"
      class="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white text-sm px-4 py-2 rounded-md shadow-md transition-all duration-300 hover:scale-105"
    >
      <WAIcon class="h-5 w-5 text-white" />
      <span>Escribime por WhatsApp</span>
    </a>    
      <a
        href="/categorias"
        class="bg-primary hover:bg-primary/90 text-black text-base font-bold px-6 py-3 rounded-md shadow-md transition-all duration-300 hover:scale-105 hover:shadow-lg"
      >
        Tienda
      </a>
    </div>

    <!-- Menú Mobile Button -->
    <div class="ml-auto xl:hidden">
      <button
        class="p-2 rounded-md hover:bg-primary/10"
        aria-label="Abrir menú"
        @click="expanded = !expanded"
      >
        <template x-if="!expanded">
          <Menu class="size-6 text-secondary" />
        </template>
        <template x-if="expanded">
          <X class="size-6 text-secondary" />
        </template>
      </button>
    </div>
  </div>

  <!-- Menú Mobile Dropdown -->
  <nav
    class="xl:hidden absolute top-full left-0 right-0 bg-white shadow-md overflow-hidden transition-all duration-300"
    x-show="expanded"
    x-collapse
  >
    <div class="flex flex-col gap-2 p-4">
      <a
        href="/#categories"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Terrenos</a
      >
      <a
        href="/#beneficios"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Beneficios</a
      >
      <a
        href="/#servicios"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Mis Servicios</a
      >
      <a
        href="/#testimonios"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Testimonios</a
      >
      <a
        href="/#contacto"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Contacto</a
      >
      <a
        href="/#blog"
        class="text-sm py-2 border-b border-gray-100"
        @click="expanded = false">Blog</a
      >
      <a
        href="https://wa.me/50660637256?text=Hola%20Jason%2C%20vi%20tu%20sitio%20web%20y%20estoy%20interesado%20en%20terrenos."
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white text-sm px-4 py-2 rounded-md shadow-md transition-all duration-300 hover:scale-105 mt-2"
      >
        <WAIcon class="h-5 w-5 text-white" />
        <span>WhatsApp</span>
      </a>
      <a
        href="/categorias"
        class="bg-primary hover:bg-primary/90 text-black text-sm font-bold px-4 py-2 rounded-md text-center"
      >
        Tienda
      </a>
    </div>
  </nav>
</header>

<style>
  [x-cloak] {
    display: none !important;
  }
</style>

<script is:inline>
  import Alpine from "alpinejs";
  import collapse from "@alpinejs/collapse";
  Alpine.plugin(collapse);
  window.AlpineCollapse = collapse;
  window.Alpine = Alpine;
  Alpine.start();
</script>
